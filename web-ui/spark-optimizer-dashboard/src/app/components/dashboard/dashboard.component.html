<div class="dashboard-container">
  <header class="dashboard-header">
    <h1>Spark Resource Optimizer Dashboard</h1>
    <p class="subtitle">Monitor and optimize your Spark job configurations</p>
  </header>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading dashboard data...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">
    <p class="error-message">{{ error }}</p>
    <button (click)="loadDashboardData()" class="retry-button">Retry</button>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!loading && !error" class="dashboard-content">
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-content">
          <h3>Total Jobs</h3>
          <p class="stat-value">{{ stats.totalJobs }}</p>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-content">
          <h3>Successful</h3>
          <p class="stat-value">{{ stats.successfulJobs }}</p>
        </div>
      </div>

      <div class="stat-card failed">
        <div class="stat-icon">‚ùå</div>
        <div class="stat-content">
          <h3>Failed</h3>
          <p class="stat-value">{{ stats.failedJobs }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">‚è±Ô∏è</div>
        <div class="stat-content">
          <h3>Avg Duration</h3>
          <p class="stat-value">{{ formatDuration(stats.avgDuration) }}</p>
        </div>
      </div>
    </div>

    <!-- Recent Jobs Table -->
    <div class="recent-jobs-section">
      <h2>Recent Jobs</h2>

      <div class="table-container">
        <table class="jobs-table">
          <thead>
            <tr>
              <th>App ID</th>
              <th>App Name</th>
              <th>User</th>
              <th>Status</th>
              <th>Duration</th>
              <th>Input Data</th>
              <th>Executors</th>
              <th>Start Time</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let job of recentJobs" class="job-row">
              <td class="app-id">{{ job.app_id }}</td>
              <td class="app-name">{{ job.app_name }}</td>
              <td>{{ job.user }}</td>
              <td>
                <span class="status-badge" [ngClass]="job.status">
                  {{ job.status }}
                </span>
              </td>
              <td>{{ formatDuration(job.duration_ms) }}</td>
              <td>{{ formatBytes(job.metrics.input_bytes) }}</td>
              <td>{{ job.configuration.num_executors }}</td>
              <td class="timestamp">{{ job.start_time | date:'short' }}</td>
            </tr>
          </tbody>
        </table>

        <div *ngIf="recentJobs.length === 0" class="no-data">
          <p>No jobs found. Start by collecting Spark job data.</p>
        </div>
      </div>
    </div>
  </div>
</div>
